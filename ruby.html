
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Ruby</title>
    
    <meta name="author" content="Sport Ngin">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="http://sportngin.github.io/styleguide/assets/themes/twitter/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
    <link href="http://sportngin.github.io/styleguide/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="http://sportngin.github.io/styleguide/assets/themes/twitter/css/github.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

  </head>

  <body>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-narrow">
          <a class="brand" href="http://sportngin.github.io/styleguide">Sport Ngin Styleguide</a>
          <ul class="nav">
            
            
            


  
    
      
    
  
    
      
      	
      	<li class="active"><a href="http://sportngin.github.io/styleguide/ruby.html" class="active">Ruby</a></li>
      	
      
    
  
    
      
    
  



          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/sportngin/styleguide">
      <img style="position: absolute; top: 0; right: 0; border: 0;"
           src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"
           alt="Fork me on GitHub">
    </a>
    <div class="container-narrow">

      <div class="content">
        
<div class="page-header">
  <h1>Ruby </h1>
</div>

<div class="row-fluid">
  <div class="span12">
    <p>Much of this was taken from <a href="https://github.com/bbatsov/ruby-style-guide">https://github.com/bbatsov/ruby-style-guide</a> and <a href="https://github.com/styleguide/ruby">https://github.com/styleguide/ruby</a>.</p>
<h2 id='table-of-contents'><a class='reference' href='#table-of-contents'><i class='icon-map-marker'></i></a>Table of Contents</h2>
<ul>
<li id='table-of-contents_L1'><a class='reference' href='#table-of-contents_L1'><i class='icon-map-marker'></i></a><a href="#source-code-layout">Source Code Layout</a>
</li><li id='table-of-contents_L2'><a class='reference' href='#table-of-contents_L2'><i class='icon-map-marker'></i></a><a href="#syntax">Syntax</a>
</li><li id='table-of-contents_L3'><a class='reference' href='#table-of-contents_L3'><i class='icon-map-marker'></i></a><a href="#naming">Naming</a>
</li><li id='table-of-contents_L4'><a class='reference' href='#table-of-contents_L4'><i class='icon-map-marker'></i></a><a href="#comments">Comments</a>
</li><li id='table-of-contents_L5'><a class='reference' href='#table-of-contents_L5'><i class='icon-map-marker'></i></a><a href="#comment-annotations">Comment Annotations</a>
</li><li id='table-of-contents_L6'><a class='reference' href='#table-of-contents_L6'><i class='icon-map-marker'></i></a><a href="#classes--modules">Classes</a>
</li><li id='table-of-contents_L7'><a class='reference' href='#table-of-contents_L7'><i class='icon-map-marker'></i></a><a href="#exceptions">Exceptions</a>
</li><li id='table-of-contents_L8'><a class='reference' href='#table-of-contents_L8'><i class='icon-map-marker'></i></a><a href="#collections">Collections</a>
</li><li id='table-of-contents_L9'><a class='reference' href='#table-of-contents_L9'><i class='icon-map-marker'></i></a><a href="#strings">Strings</a>
</li><li id='table-of-contents_L10'><a class='reference' href='#table-of-contents_L10'><i class='icon-map-marker'></i></a><a href="#regular-expressions">Regular Expressions</a>
</li><li id='table-of-contents_L11'><a class='reference' href='#table-of-contents_L11'><i class='icon-map-marker'></i></a><a href="#percent-literals">Percent Literals</a>
</li><li id='table-of-contents_L12'><a class='reference' href='#table-of-contents_L12'><i class='icon-map-marker'></i></a><a href="#misc">Misc</a>
</li><li id='table-of-contents_L13'><a class='reference' href='#table-of-contents_L13'><i class='icon-map-marker'></i></a><a href="#never-ever">Never Ever</a>
</li></ul>
<h2 id='source-code-layout'><a class='reference' href='#source-code-layout'><i class='icon-map-marker'></i></a>Source Code Layout</h2>
<ul>
<li id='source-code-layout_L1'><a class='reference' href='#source-code-layout_L1'><i class='icon-map-marker'></i></a><p>Use <code>UTF-8</code> as the source file encoding.</p>
</li><li id='source-code-layout_L2'><a class='reference' href='#source-code-layout_L2'><i class='icon-map-marker'></i></a><p>Use two <strong>spaces</strong> per indentation level. No hard tabs.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad - four spaces</span>
<span class="k">def</span> <span class="nf">some_method</span>
    <span class="n">do_something</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="k">def</span> <span class="nf">some_method</span>
  <span class="n">do_something</span>
<span class="k">end</span>
</code></pre></div></li><li id='source-code-layout_L3'><a class='reference' href='#source-code-layout_L3'><i class='icon-map-marker'></i></a><p>Avoid single-line methods.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="k">def</span> <span class="nf">too_much</span><span class="p">;</span> <span class="n">something</span><span class="p">;</span> <span class="n">something_else</span><span class="p">;</span> <span class="k">end</span>

<span class="c1"># okish - notice that the first ; is required</span>
<span class="k">def</span> <span class="nf">no_braces_method</span><span class="p">;</span> <span class="n">body</span> <span class="k">end</span>

<span class="c1"># okish - notice that the second ; is optional</span>
<span class="k">def</span> <span class="nf">no_braces_method</span><span class="p">;</span> <span class="n">body</span><span class="p">;</span> <span class="k">end</span>

<span class="c1"># okish - valid syntax, but no ; make it kind of hard to read</span>
<span class="k">def</span> <span class="nf">some_method</span><span class="p">()</span> <span class="n">body</span> <span class="k">end</span>

<span class="c1"># good</span>
<span class="k">def</span> <span class="nf">some_method</span>
  <span class="n">body</span>
<span class="k">end</span>
</code></pre></div></li><li id='source-code-layout_L4'><a class='reference' href='#source-code-layout_L4'><i class='icon-map-marker'></i></a><p>One exception to the rule are empty-body methods.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># good</span>
<span class="k">def</span> <span class="nf">no_op</span><span class="p">;</span> <span class="k">end</span>
</code></pre></div></li><li id='source-code-layout_L5'><a class='reference' href='#source-code-layout_L5'><i class='icon-map-marker'></i></a><p>Use spaces around operators, after commas, colons and semicolons, around <code>{</code>
and before <code>}</code>. Whitespace might be (mostly) irrelevant to the Ruby
interpreter, but its proper use is the key to writing easily
readable code.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="n">sum</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span>
<span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span>
<span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="o">?</span> <span class="kp">true</span> <span class="p">:</span> <span class="kp">false</span><span class="p">;</span> <span class="nb">puts</span> <span class="s1">&#39;Hi&#39;</span>
<span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">].</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">e</span> <span class="p">}</span>
</code></pre></div></li><li id='source-code-layout_L6'><a class='reference' href='#source-code-layout_L6'><i class='icon-map-marker'></i></a><p>The only exceptions, are the exponent operator and string interpolation:</p>
</li><li id='source-code-layout_L7'><a class='reference' href='#source-code-layout_L7'><i class='icon-map-marker'></i></a><p>The exponent operator should have no spaces around it.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="n">e</span> <span class="o">=</span> <span class="n">M</span> <span class="o">*</span> <span class="n">c</span> <span class="o">**</span> <span class="mi">2</span>

<span class="c1"># good</span>
<span class="n">e</span> <span class="o">=</span> <span class="n">M</span> <span class="o">*</span> <span class="n">c</span><span class="o">**</span><span class="mi">2</span>
</code></pre></div></li><li id='source-code-layout_L8'><a class='reference' href='#source-code-layout_L8'><i class='icon-map-marker'></i></a><p>String interpolation should have no spaces after <code>#{</code> or before <code>}</code>.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="s2">&quot;string</span><span class="si">#{</span> <span class="n">expr</span> <span class="si">}</span><span class="s2">&quot;</span>

<span class="c1"># good - no spaces</span>
<span class="s2">&quot;string</span><span class="si">#{</span><span class="n">expr</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></li><li id='source-code-layout_L9'><a class='reference' href='#source-code-layout_L9'><i class='icon-map-marker'></i></a><p>No spaces after <code>(</code>, <code>[</code> or before <code>]</code>, <code>)</code>.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="n">some</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span><span class="o">.</span><span class="n">other</span>
<span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">].</span><span class="n">length</span>
</code></pre></div></li><li id='source-code-layout_L10'><a class='reference' href='#source-code-layout_L10'><i class='icon-map-marker'></i></a><p>Indent <code>when</code> as deep as <code>case</code>.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="k">case</span>
<span class="k">when</span> <span class="n">song</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;Misty&#39;</span>
  <span class="nb">puts</span> <span class="s1">&#39;Not again!&#39;</span>
<span class="k">when</span> <span class="n">song</span><span class="o">.</span><span class="n">duration</span> <span class="o">&gt;</span> <span class="mi">120</span>
  <span class="nb">puts</span> <span class="s1">&#39;Too long!&#39;</span>
<span class="k">when</span> <span class="no">Time</span><span class="o">.</span><span class="n">now</span><span class="o">.</span><span class="n">hour</span> <span class="o">&gt;</span> <span class="mi">21</span>
  <span class="nb">puts</span> <span class="s2">&quot;It&#39;s too late&quot;</span>
<span class="k">else</span>
  <span class="n">song</span><span class="o">.</span><span class="n">play</span>
<span class="k">end</span>

<span class="n">kind</span> <span class="o">=</span> <span class="k">case</span> <span class="n">year</span>
       <span class="k">when</span> <span class="mi">1850</span><span class="o">.</span><span class="n">.</span><span class="mi">1889</span> <span class="k">then</span> <span class="s1">&#39;Blues&#39;</span>
       <span class="k">when</span> <span class="mi">1890</span><span class="o">.</span><span class="n">.</span><span class="mi">1909</span> <span class="k">then</span> <span class="s1">&#39;Ragtime&#39;</span>
       <span class="k">when</span> <span class="mi">1910</span><span class="o">.</span><span class="n">.</span><span class="mi">1929</span> <span class="k">then</span> <span class="s1">&#39;New Orleans Jazz&#39;</span>
       <span class="k">when</span> <span class="mi">1930</span><span class="o">.</span><span class="n">.</span><span class="mi">1939</span> <span class="k">then</span> <span class="s1">&#39;Swing&#39;</span>
       <span class="k">when</span> <span class="mi">1940</span><span class="o">.</span><span class="n">.</span><span class="mi">1950</span> <span class="k">then</span> <span class="s1">&#39;Bebop&#39;</span>
       <span class="k">else</span> <span class="s1">&#39;Jazz&#39;</span>
       <span class="k">end</span>
</code></pre></div></li><li id='source-code-layout_L11'><a class='reference' href='#source-code-layout_L11'><i class='icon-map-marker'></i></a><p>Use empty lines between <code>def</code>s and to break up a method into logical
paragraphs.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">some_method</span>
  <span class="n">data</span> <span class="o">=</span> <span class="kp">initialize</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>

  <span class="n">data</span><span class="o">.</span><span class="n">manipulate!</span>

  <span class="n">data</span><span class="o">.</span><span class="n">result</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">some_method</span>
  <span class="n">result</span>
<span class="k">end</span>
</code></pre></div></li><li id='source-code-layout_L12'><a class='reference' href='#source-code-layout_L12'><i class='icon-map-marker'></i></a><p>Use spaces around the <code>=</code> operator when assigning default values to method parameters:</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="k">def</span> <span class="nf">some_method</span><span class="p">(</span><span class="n">arg1</span><span class="o">=</span><span class="ss">:default</span><span class="p">,</span> <span class="n">arg2</span><span class="o">=</span><span class="kp">nil</span><span class="p">,</span> <span class="n">arg3</span><span class="o">=[]</span><span class="p">)</span>
  <span class="c1"># do something...</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="k">def</span> <span class="nf">some_method</span><span class="p">(</span><span class="n">arg1</span> <span class="o">=</span> <span class="ss">:default</span><span class="p">,</span> <span class="n">arg2</span> <span class="o">=</span> <span class="kp">nil</span><span class="p">,</span> <span class="n">arg3</span> <span class="o">=</span> <span class="o">[]</span><span class="p">)</span>
  <span class="c1"># do something...</span>
<span class="k">end</span>
</code></pre></div></li><li id='source-code-layout_L13'><a class='reference' href='#source-code-layout_L13'><i class='icon-map-marker'></i></a><p>Avoid line continuation <code>\</code> where not required. In practice, avoid using
line continuations at all.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="n">result</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">\</span>
         <span class="mi">2</span>

<span class="c1"># good (but still ugly as hell)</span>
<span class="n">result</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">\</span>
         <span class="o">-</span> <span class="mi">2</span>
</code></pre></div></li><li id='source-code-layout_L14'><a class='reference' href='#source-code-layout_L14'><i class='icon-map-marker'></i></a><p>When continuing a chained method invocation on another line keep the <code>.</code> on the second line.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad - need to consult first line to understand second line</span>
<span class="n">one</span><span class="o">.</span><span class="n">two</span><span class="o">.</span><span class="n">three</span><span class="o">.</span>
  <span class="n">four</span>

<span class="c1"># good - it&#39;s immediately clear what&#39;s going on the second line</span>
<span class="n">one</span><span class="o">.</span><span class="n">two</span><span class="o">.</span><span class="n">three</span>
  <span class="o">.</span><span class="n">four</span>
</code></pre></div></li><li id='source-code-layout_L15'><a class='reference' href='#source-code-layout_L15'><i class='icon-map-marker'></i></a><p>Align the parameters of a method call if they span more than one line.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># starting point (line is too long)</span>
<span class="k">def</span> <span class="nf">send_mail</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
  <span class="no">Mailer</span><span class="o">.</span><span class="n">deliver</span><span class="p">(</span><span class="ss">to</span><span class="p">:</span> <span class="s1">&#39;bob@example.com&#39;</span><span class="p">,</span> <span class="ss">from</span><span class="p">:</span> <span class="s1">&#39;us@example.com&#39;</span><span class="p">,</span> <span class="ss">subject</span><span class="p">:</span> <span class="s1">&#39;Important message&#39;</span><span class="p">,</span> <span class="ss">body</span><span class="p">:</span> <span class="n">source</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="k">end</span>

<span class="c1"># bad (normal indent)</span>
<span class="k">def</span> <span class="nf">send_mail</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
  <span class="no">Mailer</span><span class="o">.</span><span class="n">deliver</span><span class="p">(</span>
    <span class="ss">to</span><span class="p">:</span> <span class="s1">&#39;bob@example.com&#39;</span><span class="p">,</span>
    <span class="ss">from</span><span class="p">:</span> <span class="s1">&#39;us@example.com&#39;</span><span class="p">,</span>
    <span class="ss">subject</span><span class="p">:</span> <span class="s1">&#39;Important message&#39;</span><span class="p">,</span>
    <span class="ss">body</span><span class="p">:</span> <span class="n">source</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="k">end</span>

<span class="c1"># bad (double indent)</span>
<span class="k">def</span> <span class="nf">send_mail</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
  <span class="no">Mailer</span><span class="o">.</span><span class="n">deliver</span><span class="p">(</span>
      <span class="ss">to</span><span class="p">:</span> <span class="s1">&#39;bob@example.com&#39;</span><span class="p">,</span>
      <span class="ss">from</span><span class="p">:</span> <span class="s1">&#39;us@example.com&#39;</span><span class="p">,</span>
      <span class="ss">subject</span><span class="p">:</span> <span class="s1">&#39;Important message&#39;</span><span class="p">,</span>
      <span class="ss">body</span><span class="p">:</span> <span class="n">source</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="k">def</span> <span class="nf">send_mail</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
  <span class="no">Mailer</span><span class="o">.</span><span class="n">deliver</span><span class="p">(</span><span class="ss">to</span><span class="p">:</span> <span class="s1">&#39;bob@example.com&#39;</span><span class="p">,</span>
                 <span class="ss">from</span><span class="p">:</span> <span class="s1">&#39;us@example.com&#39;</span><span class="p">,</span>
                 <span class="ss">subject</span><span class="p">:</span> <span class="s1">&#39;Important message&#39;</span><span class="p">,</span>
                 <span class="ss">body</span><span class="p">:</span> <span class="n">source</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></li><li id='source-code-layout_L16'><a class='reference' href='#source-code-layout_L16'><i class='icon-map-marker'></i></a><p>Add underscores to large numeric literals to improve their readability.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad - how many 0s are there?</span>
<span class="n">num</span> <span class="o">=</span> <span class="mi">1000000</span>

<span class="c1"># good - much easier to parse for the human brain</span>
<span class="n">num</span> <span class="o">=</span> <span class="mi">1_000_000</span>
</code></pre></div></li><li id='source-code-layout_L17'><a class='reference' href='#source-code-layout_L17'><i class='icon-map-marker'></i></a><p>Limit lines to 120 characters.</p>
</li><li id='source-code-layout_L18'><a class='reference' href='#source-code-layout_L18'><i class='icon-map-marker'></i></a><p>Remove all trailing whitespace.</p>
</li><li id='source-code-layout_L19'><a class='reference' href='#source-code-layout_L19'><i class='icon-map-marker'></i></a><p>Don&#39;t use block comments. They cannot be preceded by whitespace and are not as easy to spot as regular comments.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="o">==</span> <span class="k">begin</span>
<span class="n">comment</span> <span class="n">line</span>
<span class="n">another</span> <span class="n">comment</span> <span class="n">line</span>
<span class="o">==</span> <span class="k">end</span>

<span class="c1"># good</span>
<span class="c1"># comment line</span>
<span class="c1"># another comment line</span>
</code></pre></div></li><li id='source-code-layout_L20'><a class='reference' href='#source-code-layout_L20'><i class='icon-map-marker'></i></a><p>Leave an empty line at the end of files.</p>
</li></ul>
<h2 id='syntax'><a class='reference' href='#syntax'><i class='icon-map-marker'></i></a>Syntax</h2>
<ul>
<li id='syntax_L1'><a class='reference' href='#syntax_L1'><i class='icon-map-marker'></i></a><p>Use <code>::</code> only to reference constants(this includes classes and
modules). Never use <code>::</code> for method invocation.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="ss">SomeClass</span><span class="p">:</span><span class="ss">:some_method</span>
<span class="n">some_object</span><span class="o">::</span><span class="n">some_method</span>

<span class="c1"># good</span>
<span class="no">SomeClass</span><span class="o">.</span><span class="n">some_method</span>
<span class="n">some_object</span><span class="o">.</span><span class="n">some_method</span>
<span class="ss">SomeModule</span><span class="p">:</span><span class="ss">:SomeClass</span><span class="o">::</span><span class="no">SOME_CONST</span>
</code></pre></div></li><li id='syntax_L2'><a class='reference' href='#syntax_L2'><i class='icon-map-marker'></i></a><p>Use <code>def</code> with parentheses when there are arguments. Omit the
parentheses when the method doesn&#39;t accept any arguments.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="k">def</span> <span class="nf">some_method</span><span class="p">()</span>
 <span class="c1"># body omitted</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="k">def</span> <span class="nf">some_method</span>
 <span class="c1"># body omitted</span>
<span class="k">end</span>

<span class="c1"># bad</span>
<span class="k">def</span> <span class="nf">some_method_with_arguments</span> <span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span>
 <span class="c1"># body omitted</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="k">def</span> <span class="nf">some_method_with_arguments</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">)</span>
 <span class="c1"># body omitted</span>
<span class="k">end</span>
</code></pre></div></li><li id='syntax_L3'><a class='reference' href='#syntax_L3'><i class='icon-map-marker'></i></a><p>Never use <code>then</code> for multi-line <code>if/unless</code>.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="k">if</span> <span class="n">some_condition</span> <span class="k">then</span>
  <span class="c1"># body omitted</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="k">if</span> <span class="n">some_condition</span>
  <span class="c1"># body omitted</span>
<span class="k">end</span>
</code></pre></div></li><li id='syntax_L4'><a class='reference' href='#syntax_L4'><i class='icon-map-marker'></i></a><p>Favor the ternary operator(<code>?:</code>) over <code>if/then/else/end</code> constructs</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="n">result</span> <span class="o">=</span> <span class="k">if</span> <span class="n">some_condition</span> <span class="k">then</span> <span class="n">something</span> <span class="k">else</span> <span class="n">something_else</span> <span class="k">end</span>

<span class="c1"># good</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">some_condition</span> <span class="p">?</span> <span class="n">something</span> <span class="p">:</span> <span class="n">something_else</span>
</code></pre></div></li><li id='syntax_L5'><a class='reference' href='#syntax_L5'><i class='icon-map-marker'></i></a><p>Use one expression per branch in a ternary operator. This
also means that ternary operators must not be nested. Prefer
<code>if/else</code> constructs in these cases.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="n">some_condition</span> <span class="p">?</span> <span class="p">(</span><span class="n">nested_condition</span> <span class="p">?</span> <span class="n">nested_something</span> <span class="p">:</span> <span class="n">nested_something_else</span><span class="p">)</span> <span class="p">:</span> <span class="n">something_else</span>

<span class="c1"># good</span>
<span class="k">if</span> <span class="n">some_condition</span>
  <span class="n">nested_condition</span> <span class="p">?</span> <span class="n">nested_something</span> <span class="p">:</span> <span class="n">nested_something_else</span>
<span class="k">else</span>
  <span class="n">something_else</span>
<span class="k">end</span>
</code></pre></div></li><li id='syntax_L6'><a class='reference' href='#syntax_L6'><i class='icon-map-marker'></i></a><p>Use <code>!</code> instead of <code>not</code>.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad - braces are required because of op precedence</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="ow">not</span> <span class="n">something</span><span class="p">)</span>

<span class="c1"># good</span>
<span class="n">x</span> <span class="o">=</span> <span class="o">!</span><span class="n">something</span>
</code></pre></div></li><li id='syntax_L7'><a class='reference' href='#syntax_L7'><i class='icon-map-marker'></i></a><p>The <code>and</code> and <code>or</code> keywords are banned. It&#39;s just not worth
it. Always use <code>&amp;&amp;</code> and <code>||</code> instead.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="c1"># boolean expression</span>
<span class="k">if</span> <span class="n">some_condition</span> <span class="ow">and</span> <span class="n">some_other_condition</span>
  <span class="n">do_something</span>
<span class="k">end</span>

<span class="c1"># control flow</span>
<span class="n">document</span><span class="o">.</span><span class="n">saved?</span> <span class="ow">or</span> <span class="n">document</span><span class="o">.</span><span class="n">save!</span>

<span class="c1"># good</span>
<span class="c1"># boolean expression</span>
<span class="k">if</span> <span class="n">some_condition</span> <span class="o">&amp;&amp;</span> <span class="n">some_other_condition</span>
  <span class="n">do_something</span>
<span class="k">end</span>

<span class="c1"># control flow</span>
<span class="n">document</span><span class="o">.</span><span class="n">saved?</span> <span class="o">||</span> <span class="n">document</span><span class="o">.</span><span class="n">save!</span>
</code></pre></div></li><li id='syntax_L8'><a class='reference' href='#syntax_L8'><i class='icon-map-marker'></i></a><p>Do not use multi-line <code>?:</code> (the ternary operator); use <code>if/unless</code> instead.</p>
</li><li id='syntax_L9'><a class='reference' href='#syntax_L9'><i class='icon-map-marker'></i></a><p>Favor modifier <code>if/unless/while/until</code> usage when you have a single-line
body. Another good alternative is the usage of control flow <code>&amp;&amp;/||</code>.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="k">if</span> <span class="n">some_condition</span>
  <span class="n">do_something</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="n">do_something</span> <span class="k">if</span> <span class="n">some_condition</span>

<span class="c1"># another good option</span>
<span class="n">some_condition</span> <span class="o">&amp;&amp;</span> <span class="n">do_something</span>

<span class="c1"># bad</span>
<span class="k">while</span> <span class="n">some_condition</span>
  <span class="n">do_something</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="n">do_something</span> <span class="k">while</span> <span class="n">some_condition</span>
</code></pre></div></li><li id='syntax_L10'><a class='reference' href='#syntax_L10'><i class='icon-map-marker'></i></a><p>Favor <code>unless</code> over <code>if</code> for negative conditions (or control
flow <code>||</code>). Also Favor <code>until</code> over <code>while</code> for negative conditions.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="n">do_something</span> <span class="k">if</span> <span class="o">!</span><span class="n">some_condition</span>

<span class="c1"># bad</span>
<span class="n">do_something</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">some_condition</span>

<span class="c1"># good</span>
<span class="n">do_something</span> <span class="k">unless</span> <span class="n">some_condition</span>

<span class="c1"># another good option</span>
<span class="n">some_condition</span> <span class="o">||</span> <span class="n">do_something</span>

<span class="c1"># bad</span>
<span class="n">do_something</span> <span class="k">while</span> <span class="o">!</span><span class="n">some_condition</span>

<span class="c1"># good</span>
<span class="n">do_something</span> <span class="k">until</span> <span class="n">some_condition</span>
</code></pre></div></li><li id='syntax_L11'><a class='reference' href='#syntax_L11'><i class='icon-map-marker'></i></a><p>Never use <code>unless</code> with <code>else</code>. Rewrite these with the positive case first.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="k">unless</span> <span class="n">success?</span>
  <span class="nb">puts</span> <span class="s1">&#39;failure&#39;</span>
<span class="k">else</span>
  <span class="nb">puts</span> <span class="s1">&#39;success&#39;</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="k">if</span> <span class="n">success?</span>
  <span class="nb">puts</span> <span class="s1">&#39;success&#39;</span>
<span class="k">else</span>
  <span class="nb">puts</span> <span class="s1">&#39;failure&#39;</span>
<span class="k">end</span>
</code></pre></div></li><li id='syntax_L12'><a class='reference' href='#syntax_L12'><i class='icon-map-marker'></i></a><p>Don&#39;t use parentheses around the condition of an <code>if/unless/while</code>,
unless the condition contains an assignment.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">)</span>
  <span class="c1"># body omitted</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">10</span>
  <span class="c1"># body omitted</span>
<span class="k">end</span>

<span class="c1"># ok</span>
<span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="nb">self</span><span class="o">.</span><span class="n">next_value</span><span class="p">)</span>
  <span class="c1"># body omitted</span>
<span class="k">end</span>
</code></pre></div></li><li id='syntax_L13'><a class='reference' href='#syntax_L13'><i class='icon-map-marker'></i></a><p>Don&#39;t use the return value of <code>=</code> (an assignment) in conditional expressions.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad (+ a warning)</span>
<span class="k">if</span> <span class="p">(</span><span class="n">v</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">grep</span><span class="p">(</span><span class="sr">/foo/</span><span class="p">))</span>
  <span class="n">do_something</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
  <span class="o">.</span><span class="n">.</span><span class="o">.</span>
<span class="k">end</span>

<span class="c1"># bad (+ a warning)</span>
<span class="k">if</span> <span class="n">v</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">grep</span><span class="p">(</span><span class="sr">/foo/</span><span class="p">)</span>
  <span class="n">do_something</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
  <span class="o">.</span><span class="n">.</span><span class="o">.</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">grep</span><span class="p">(</span><span class="sr">/foo/</span><span class="p">)</span>
<span class="k">if</span> <span class="n">v</span>
  <span class="n">do_something</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
  <span class="o">.</span><span class="n">.</span><span class="o">.</span>
<span class="k">end</span>
</code></pre></div></li><li id='syntax_L14'><a class='reference' href='#syntax_L14'><i class='icon-map-marker'></i></a><p>Use Kernel#loop with break rather than <code>begin/end/until</code> or <code>begin/end/while</code> for post-loop tests.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="k">begin</span>
 <span class="nb">puts</span> <span class="n">val</span>
 <span class="n">val</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="k">end</span> <span class="k">while</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="mi">0</span>

<span class="c1"># good</span>
<span class="kp">loop</span> <span class="k">do</span>
 <span class="nb">puts</span> <span class="n">val</span>
 <span class="n">val</span> <span class="o">+=</span> <span class="mi">1</span>
 <span class="k">break</span> <span class="k">unless</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="mi">0</span>
<span class="k">end</span>
</code></pre></div></li><li id='syntax_L15'><a class='reference' href='#syntax_L15'><i class='icon-map-marker'></i></a><p>Omit parentheses around parameters for methods that are part of an
internal DSL (e.g. Rake, Rails, RSpec), methods that have
&quot;keyword&quot; status in Ruby (e.g. <code>attr_reader</code>, <code>puts</code>) and attribute
access methods. Use parentheses around the arguments of all other
method invocations.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Person</span>
  <span class="kp">attr_reader</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:age</span>

  <span class="c1"># omitted</span>
<span class="k">end</span>

<span class="n">temperance</span> <span class="o">=</span> <span class="no">Person</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;Temperance&#39;</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="n">temperance</span><span class="o">.</span><span class="n">name</span>

<span class="nb">puts</span> <span class="n">temperance</span><span class="o">.</span><span class="n">age</span>

<span class="n">x</span> <span class="o">=</span> <span class="no">Math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="n">array</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

<span class="n">bowling</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">should</span> <span class="o">==</span> <span class="mi">0</span>
</code></pre></div></li><li id='syntax_L16'><a class='reference' href='#syntax_L16'><i class='icon-map-marker'></i></a><p>Omit parentheses for method calls with no arguments.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="no">Kernel</span><span class="o">.</span><span class="n">exit!</span><span class="p">()</span>
<span class="mi">2</span><span class="o">.</span><span class="n">even?</span><span class="p">()</span>
<span class="nb">fork</span><span class="p">()</span>
<span class="s1">&#39;test&#39;</span><span class="o">.</span><span class="n">upcase</span><span class="p">()</span>

<span class="c1"># good</span>
<span class="no">Kernel</span><span class="o">.</span><span class="n">exit!</span>
<span class="mi">2</span><span class="o">.</span><span class="n">even?</span>
<span class="nb">fork</span>
<span class="s1">&#39;test&#39;</span><span class="o">.</span><span class="n">upcase</span>
</code></pre></div></li><li id='syntax_L17'><a class='reference' href='#syntax_L17'><i class='icon-map-marker'></i></a><p>Prefer <code>{...}</code> over <code>do...end</code> for single-line blocks.  Avoid using
<code>{...}</code> for multi-line blocks (multiline chaining is always
ugly). Always use <code>do...end</code> for &quot;control flow&quot; and &quot;method
definitions&quot; (e.g. in Rakefiles and certain DSLs).  Avoid <code>do...end</code>
when chaining.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="n">names</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;Bozhidar&#39;</span><span class="p">,</span> <span class="s1">&#39;Steve&#39;</span><span class="p">,</span> <span class="s1">&#39;Sarah&#39;</span><span class="o">]</span>

<span class="c1"># bad</span>
<span class="n">names</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="nb">name</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="nb">name</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="n">names</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="nb">name</span><span class="o">|</span> <span class="nb">puts</span> <span class="nb">name</span> <span class="p">}</span>

<span class="c1"># bad</span>
<span class="n">names</span><span class="o">.</span><span class="n">select</span> <span class="k">do</span> <span class="o">|</span><span class="nb">name</span><span class="o">|</span>
  <span class="nb">name</span><span class="o">.</span><span class="n">start_with?</span><span class="p">(</span><span class="s1">&#39;S&#39;</span><span class="p">)</span>
<span class="k">end</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="nb">name</span><span class="o">|</span> <span class="nb">name</span><span class="o">.</span><span class="n">upcase</span> <span class="p">}</span>

<span class="c1"># good</span>
<span class="n">names</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span> <span class="o">|</span><span class="nb">name</span><span class="o">|</span> <span class="nb">name</span><span class="o">.</span><span class="n">start_with?</span><span class="p">(</span><span class="s1">&#39;S&#39;</span><span class="p">)</span> <span class="p">}</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="nb">name</span><span class="o">|</span> <span class="nb">name</span><span class="o">.</span><span class="n">upcase</span> <span class="p">}</span>
</code></pre></div></li><li id='syntax_L18'><a class='reference' href='#syntax_L18'><i class='icon-map-marker'></i></a><p>Avoid <code>return</code> where not required for flow of control.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="k">def</span> <span class="nf">some_method</span><span class="p">(</span><span class="n">some_arr</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">some_arr</span><span class="o">.</span><span class="n">size</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="k">def</span> <span class="nf">some_method</span><span class="p">(</span><span class="n">some_arr</span><span class="p">)</span>
  <span class="n">some_arr</span><span class="o">.</span><span class="n">size</span>
<span class="k">end</span>
</code></pre></div></li><li id='syntax_L19'><a class='reference' href='#syntax_L19'><i class='icon-map-marker'></i></a><p>Avoid <code>self</code> where not required. (It is only required when calling a self write accessor)</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="k">def</span> <span class="nf">ready?</span>
  <span class="k">if</span> <span class="nb">self</span><span class="o">.</span><span class="n">last_reviewed_at</span> <span class="o">&gt;</span> <span class="nb">self</span><span class="o">.</span><span class="n">last_updated_at</span>
    <span class="nb">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="nb">self</span><span class="o">.</span><span class="n">options</span><span class="p">)</span>
    <span class="nb">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="ss">:in_progress</span>
  <span class="k">end</span>
  <span class="nb">self</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="ss">:verified</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="k">def</span> <span class="nf">ready?</span>
  <span class="k">if</span> <span class="n">last_reviewed_at</span> <span class="o">&gt;</span> <span class="n">last_updated_at</span>
    <span class="n">worker</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
    <span class="nb">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="ss">:in_progress</span>
  <span class="k">end</span>
  <span class="n">status</span> <span class="o">==</span> <span class="ss">:verified</span>
<span class="k">end</span>
</code></pre></div></li><li id='syntax_L20'><a class='reference' href='#syntax_L20'><i class='icon-map-marker'></i></a><p>Avoid shadowing methods with local variables unless they are both equivalent.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Foo</span>
  <span class="kp">attr_accessor</span> <span class="ss">:options</span>

  <span class="c1"># ok</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
    <span class="nb">self</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="n">options</span>
    <span class="c1"># both options and self.options are equivalent here</span>
  <span class="k">end</span>

  <span class="c1"># bad</span>
  <span class="k">def</span> <span class="nf">do_something</span><span class="p">(</span><span class="n">options</span> <span class="o">=</span> <span class="p">{})</span>
    <span class="k">unless</span> <span class="n">options</span><span class="o">[</span><span class="ss">:when</span><span class="o">]</span> <span class="o">==</span> <span class="ss">:later</span>
      <span class="n">output</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">options</span><span class="o">[</span><span class="ss">:message</span><span class="o">]</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="c1"># good</span>
  <span class="k">def</span> <span class="nf">do_something</span><span class="p">(</span><span class="n">params</span> <span class="o">=</span> <span class="p">{})</span>
    <span class="k">unless</span> <span class="n">params</span><span class="o">[</span><span class="ss">:when</span><span class="o">]</span> <span class="o">==</span> <span class="ss">:later</span>
      <span class="n">output</span><span class="p">(</span><span class="n">options</span><span class="o">[</span><span class="ss">:message</span><span class="o">]</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></li><li id='syntax_L21'><a class='reference' href='#syntax_L21'><i class='icon-map-marker'></i></a><p>Use <code>||=</code> freely to initialize variables.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># set name to Bozhidar, only if it&#39;s nil or false</span>
<span class="nb">name</span> <span class="o">||=</span> <span class="s1">&#39;Bozhidar&#39;</span>
</code></pre></div></li><li id='syntax_L22'><a class='reference' href='#syntax_L22'><i class='icon-map-marker'></i></a><p>Don&#39;t use <code>||=</code> to initialize boolean variables. (Consider what
would happen if the current value happened to be <code>false</code>.)</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad - would set enabled to true even if it was false</span>
<span class="n">enabled</span> <span class="o">||=</span> <span class="kp">true</span>

<span class="c1"># good</span>
<span class="n">enabled</span> <span class="o">=</span> <span class="kp">true</span> <span class="k">if</span> <span class="n">enabled</span><span class="o">.</span><span class="n">nil?</span>
</code></pre></div></li><li id='syntax_L23'><a class='reference' href='#syntax_L23'><i class='icon-map-marker'></i></a><p>Prefer <code>proc</code> over <code>Proc.new</code>.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="nb">p</span> <span class="o">=</span> <span class="no">Proc</span><span class="o">.</span><span class="n">new</span> <span class="p">{</span> <span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">n</span> <span class="p">}</span>

<span class="c1"># good</span>
<span class="nb">p</span> <span class="o">=</span> <span class="nb">proc</span> <span class="p">{</span> <span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">n</span> <span class="p">}</span>
</code></pre></div></li><li id='syntax_L24'><a class='reference' href='#syntax_L24'><i class='icon-map-marker'></i></a><p>Use <code>_</code> for unused block parameters.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="n">result</span> <span class="o">=</span> <span class="nb">hash</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="n">v</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">}</span>

<span class="c1"># good</span>
<span class="n">result</span> <span class="o">=</span> <span class="nb">hash</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">_</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="n">v</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">}</span>
</code></pre></div></li><li id='syntax_L25'><a class='reference' href='#syntax_L25'><i class='icon-map-marker'></i></a><p>Use <code>[*var]</code> or <code>Array()</code> instead of explicit <code>Array</code> check, when dealing with a
variable you want to treat as an Array, but you&#39;re not certain it&#39;s
an array.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="n">paths</span> <span class="o">=</span> <span class="o">[</span><span class="n">paths</span><span class="o">]</span> <span class="k">unless</span> <span class="n">paths</span><span class="o">.</span><span class="n">is_a?</span> <span class="nb">Array</span>
<span class="n">paths</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">path</span><span class="o">|</span> <span class="n">do_something</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="p">}</span>

<span class="c1"># good</span>
<span class="o">[*</span><span class="n">paths</span><span class="o">].</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">path</span><span class="o">|</span> <span class="n">do_something</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="p">}</span>

<span class="c1"># good (and a bit more readable)</span>
<span class="nb">Array</span><span class="p">(</span><span class="n">paths</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">path</span><span class="o">|</span> <span class="n">do_something</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="p">}</span>
</code></pre></div></li><li id='syntax_L26'><a class='reference' href='#syntax_L26'><i class='icon-map-marker'></i></a><p>Use ranges instead of complex comparison logic when possible.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="n">do_something</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">1000</span> <span class="o">&amp;&amp;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">2000</span>

<span class="c1"># good</span>
<span class="n">do_something</span> <span class="k">if</span> <span class="p">(</span><span class="mi">1000</span><span class="o">.</span><span class="n">.</span><span class="o">.</span><span class="mi">2000</span><span class="p">)</span><span class="o">.</span><span class="n">include?</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</code></pre></div></li></ul>
<h2 id='naming'><a class='reference' href='#naming'><i class='icon-map-marker'></i></a>Naming</h2>
<ul>
<li id='naming_L1'><a class='reference' href='#naming_L1'><i class='icon-map-marker'></i></a><p>Name identifiers in English.</p>
</li><li id='naming_L2'><a class='reference' href='#naming_L2'><i class='icon-map-marker'></i></a><p>Use <code>snake_case</code> for symbols, methods and variables.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="ss">:&#39;some symbol&#39;</span>
<span class="ss">:SomeSymbol</span>
<span class="ss">:someSymbol</span>

<span class="n">someVar</span> <span class="o">=</span> <span class="mi">5</span>

<span class="k">def</span> <span class="nf">someMethod</span>
  <span class="o">.</span><span class="n">.</span><span class="o">.</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">SomeMethod</span>
 <span class="o">.</span><span class="n">.</span><span class="o">.</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="ss">:some_symbol</span>

<span class="k">def</span> <span class="nf">some_method</span>
  <span class="o">.</span><span class="n">.</span><span class="o">.</span>
<span class="k">end</span>
</code></pre></div></li><li id='naming_L3'><a class='reference' href='#naming_L3'><i class='icon-map-marker'></i></a><p>Use <code>CamelCase</code> for classes and modules.  (Keep acronyms like HTTP,
RFC, XML uppercase.)</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="k">class</span> <span class="nc">Someclass</span>
  <span class="o">.</span><span class="n">.</span><span class="o">.</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Some_Class</span>
  <span class="o">.</span><span class="n">.</span><span class="o">.</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">SomeXml</span>
  <span class="o">.</span><span class="n">.</span><span class="o">.</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="k">class</span> <span class="nc">SomeClass</span>
  <span class="o">.</span><span class="n">.</span><span class="o">.</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">SomeXML</span>
  <span class="o">.</span><span class="n">.</span><span class="o">.</span>
<span class="k">end</span>
</code></pre></div></li><li id='naming_L4'><a class='reference' href='#naming_L4'><i class='icon-map-marker'></i></a><p>Use <code>SCREAMING_SNAKE_CASE</code> for other constants.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="no">SomeConst</span> <span class="o">=</span> <span class="mi">5</span>

<span class="c1"># good</span>
<span class="no">SOME_CONST</span> <span class="o">=</span> <span class="mi">5</span>
</code></pre></div></li><li id='naming_L5'><a class='reference' href='#naming_L5'><i class='icon-map-marker'></i></a><p>The names of predicate methods (methods that return a boolean value)
should end in a question mark.
(i.e. <code>Array#empty?</code>).</p>
</li><li id='naming_L6'><a class='reference' href='#naming_L6'><i class='icon-map-marker'></i></a><p>The names of potentially <em>dangerous</em> methods (i.e. methods that
modify <code>self</code> or the arguments, <code>exit!</code> (doesn&#39;t run the finalizers
like <code>exit</code> does), etc.) should end with an exclamation mark if
there exists a safe version of that <em>dangerous</em> method.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad - there is not matching &#39;safe&#39; method</span>
<span class="k">class</span> <span class="nc">Person</span>
  <span class="k">def</span> <span class="nf">update!</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="k">class</span> <span class="nc">Person</span>
  <span class="k">def</span> <span class="nf">update</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="k">class</span> <span class="nc">Person</span>
  <span class="k">def</span> <span class="nf">update!</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">update</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></li><li id='naming_L7'><a class='reference' href='#naming_L7'><i class='icon-map-marker'></i></a><p>When using <code>reduce</code> with short blocks, name the arguments <code>|a, e|</code>
(accumulator, element), or the singular form of the mapped variable.</p>
</li><li id='naming_L8'><a class='reference' href='#naming_L8'><i class='icon-map-marker'></i></a><p>When using <code>map</code>, name the argument <code>|e|</code> (element),
or the singular form of the mapped variable.</p>
</li><li id='naming_L9'><a class='reference' href='#naming_L9'><i class='icon-map-marker'></i></a><p>When defining binary operators, name the argument <code>other</code>(<code>&lt;&lt;</code> and
<code>[]</code> are exceptions to the rule, since their semantics are different).</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">+</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
  <span class="c1"># body omitted</span>
<span class="k">end</span>
</code></pre></div></li><li id='naming_L10'><a class='reference' href='#naming_L10'><i class='icon-map-marker'></i></a><p>Prefer <code>map</code> over <code>collect</code>, <code>find</code> over <code>detect</code>, <code>select</code> over
<code>find_all</code>, <code>reduce</code> over <code>inject</code> and <code>size</code> over <code>length</code>.</p>
</li><li id='naming_L11'><a class='reference' href='#naming_L11'><i class='icon-map-marker'></i></a><p>Use <code>flat_map</code> instead of <code>map</code> + <code>flatten</code>.
This does not apply for arrays with a depth greater than 2, i.e.
if <code>users.first.songs == [&#39;a&#39;, [&#39;b&#39;,&#39;c&#39;]]</code>, then use <code>map + flatten</code> rather than <code>flat_map</code>.
<code>flat_map</code> flattens the array by 1, whereas <code>flatten</code> flattens it all the way.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="n">all_songs</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:songs</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="o">.</span><span class="n">uniq</span>

<span class="c1"># good</span>
<span class="n">all_songs</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">flat_map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:songs</span><span class="p">)</span><span class="o">.</span><span class="n">uniq</span>
</code></pre></div></li></ul>
<h2 id='comments'><a class='reference' href='#comments'><i class='icon-map-marker'></i></a>Comments</h2>
<ul>
<li id='comments_L1'><a class='reference' href='#comments_L1'><i class='icon-map-marker'></i></a>Write comments sparingly, make code self-documenting whenever possible.
</li><li id='comments_L2'><a class='reference' href='#comments_L2'><i class='icon-map-marker'></i></a>Write comments in English.
</li><li id='comments_L3'><a class='reference' href='#comments_L3'><i class='icon-map-marker'></i></a>Use one space between the leading <code>#</code> character of the comment and the text
of the comment.
</li><li id='comments_L4'><a class='reference' href='#comments_L4'><i class='icon-map-marker'></i></a>Comments longer than a word are capitalized and use punctuation. Use <a href="http://en.wikipedia.org/wiki/Sentence_spacing">one
space</a> after periods.
</li><li id='comments_L5'><a class='reference' href='#comments_L5'><i class='icon-map-marker'></i></a><p>Avoid superfluous comments.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1"># increments counter by one</span>
</code></pre></div></li><li id='comments_L6'><a class='reference' href='#comments_L6'><i class='icon-map-marker'></i></a><p>Keep existing comments up-to-date. An outdated comment is worse than no comment
at all.</p>
</li><li id='comments_L7'><a class='reference' href='#comments_L7'><i class='icon-map-marker'></i></a><p>Avoid writing comments to explain bad code. Refactor the code to
make it self-explanatory.</p>
</li></ul>
<h3 id='comment-annotations'><a class='reference' href='#comment-annotations'><i class='icon-map-marker'></i></a>Comment Annotations</h3>
<ul>
<li id='comment-annotations_L1'><a class='reference' href='#comment-annotations_L1'><i class='icon-map-marker'></i></a>Annotations should usually be written on the line immediately above
the relevant code.
</li><li id='comment-annotations_L2'><a class='reference' href='#comment-annotations_L2'><i class='icon-map-marker'></i></a>The annotation keyword inis followed by a colon and a space, then a note
describing the problem.
</li><li id='comment-annotations_L3'><a class='reference' href='#comment-annotations_L3'><i class='icon-map-marker'></i></a><p>If multiple lines are required to describe the problem, subsequent
lines should be indented two spaces after the <code>#</code>.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">bar</span>
  <span class="c1"># FIXME: This has crashed occasionally since v3.2.1. It may</span>
  <span class="c1">#   be related to the BarBazUtil upgrade.</span>
  <span class="n">baz</span><span class="p">(</span><span class="ss">:quux</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></li><li id='comment-annotations_L4'><a class='reference' href='#comment-annotations_L4'><i class='icon-map-marker'></i></a><p>In cases where the problem is so obvious that any documentation would
be redundant, annotations may be left at the end of the offending line
with no note. This usage should be the exception and not the rule.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">bar</span>
  <span class="nb">sleep</span> <span class="mi">100</span> <span class="c1"># OPTIMIZE</span>
<span class="k">end</span>
</code></pre></div></li><li id='comment-annotations_L5'><a class='reference' href='#comment-annotations_L5'><i class='icon-map-marker'></i></a><p>Use <code>TODO</code> to note missing features or functionality that should be
added at a later date.</p>
</li><li id='comment-annotations_L6'><a class='reference' href='#comment-annotations_L6'><i class='icon-map-marker'></i></a><p>Use <code>FIXME</code> to note broken code that needs to be fixed.</p>
</li><li id='comment-annotations_L7'><a class='reference' href='#comment-annotations_L7'><i class='icon-map-marker'></i></a><p>Use <code>OPTIMIZE</code> to note slow or inefficient code that may cause
performance problems.</p>
</li><li id='comment-annotations_L8'><a class='reference' href='#comment-annotations_L8'><i class='icon-map-marker'></i></a><p>Use <code>HACK</code> to note code smells where questionable coding practices
were used and should be refactored away.</p>
</li><li id='comment-annotations_L9'><a class='reference' href='#comment-annotations_L9'><i class='icon-map-marker'></i></a><p>Use <code>REVIEW</code> to note anything that should be looked at to confirm it
is working as intended. For example: <code>REVIEW: Are we sure this is how the
client does X currently?</code></p>
</li><li id='comment-annotations_L10'><a class='reference' href='#comment-annotations_L10'><i class='icon-map-marker'></i></a><p>Use other custom annotation keywords if it feels appropriate, but be
sure to document them in your project&#39;s <code>README</code> or similar.</p>
</li></ul>
<h2 id='classes--modules'><a class='reference' href='#classes--modules'><i class='icon-map-marker'></i></a>Classes &amp; Modules</h2>
<ul>
<li id='classes--modules_L1'><a class='reference' href='#classes--modules_L1'><i class='icon-map-marker'></i></a><p>Use a consistent structure in your class definitions.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Person</span>
  <span class="c1"># extend and include go first</span>
  <span class="kp">extend</span> <span class="no">SomeModule</span>
  <span class="kp">include</span> <span class="no">AnotherModule</span>

  <span class="c1"># constants are next</span>
  <span class="no">SOME_CONSTANT</span> <span class="o">=</span> <span class="mi">20</span>

  <span class="c1"># afterwards we have attribute macros</span>
  <span class="kp">attr_reader</span> <span class="ss">:name</span>

  <span class="c1"># followed by other macros (if any)</span>
  <span class="n">validates</span> <span class="ss">:name</span>

  <span class="c1"># public class methods are next in line</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">some_method</span>
  <span class="k">end</span>

  <span class="c1"># followed by public instance methods</span>
  <span class="k">def</span> <span class="nf">some_method</span>
  <span class="k">end</span>

  <span class="c1"># protected and private methods are grouped near the end</span>

  <span class="k">def</span> <span class="nf">some_protected_method</span>
  <span class="k">end</span>
  <span class="kp">protected</span> <span class="ss">:some_protected_method</span>

  <span class="k">def</span> <span class="nf">some_private_method</span>
  <span class="k">end</span>
  <span class="kp">private</span> <span class="ss">:some_private_method</span>
<span class="k">end</span>
</code></pre></div></li><li id='classes--modules_L2'><a class='reference' href='#classes--modules_L2'><i class='icon-map-marker'></i></a><p>Prefer modules to classes with only class methods. Classes should be
used only when it makes sense to create instances out of them.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="k">class</span> <span class="nc">SomeClass</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">some_method</span>
    <span class="c1"># body omitted</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">some_other_method</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="k">module</span> <span class="nn">SomeClass</span>
  <span class="kp">module_function</span>

  <span class="k">def</span> <span class="nf">some_method</span>
    <span class="c1"># body omitted</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">some_other_method</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></li><li id='classes--modules_L3'><a class='reference' href='#classes--modules_L3'><i class='icon-map-marker'></i></a><p>Favor the use of <code>module_function</code> over <code>extend self</code> when you want
to turn a module&#39;s instance methods into class methods.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="k">module</span> <span class="nn">Utilities</span>
  <span class="kp">extend</span> <span class="nb">self</span>

  <span class="k">def</span> <span class="nf">parse_something</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
    <span class="c1"># do stuff here</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">other_utility_method</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>
    <span class="c1"># do some more stuff</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="k">module</span> <span class="nn">Utilities</span>
  <span class="kp">module_function</span>

  <span class="k">def</span> <span class="nf">parse_something</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
    <span class="c1"># do stuff here</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">other_utility_method</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>
    <span class="c1"># do some more stuff</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></li><li id='classes--modules_L4'><a class='reference' href='#classes--modules_L4'><i class='icon-map-marker'></i></a><p>Use the <code>attr</code> family of functions to define trivial accessors or
mutators.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="k">class</span> <span class="nc">Person</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span><span class="p">)</span>
    <span class="vi">@first_name</span> <span class="o">=</span> <span class="n">first_name</span>
    <span class="vi">@last_name</span> <span class="o">=</span> <span class="n">last_name</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">first_name</span>
    <span class="vi">@first_name</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">last_name</span>
    <span class="vi">@last_name</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="k">class</span> <span class="nc">Person</span>
  <span class="kp">attr_reader</span> <span class="ss">:first_name</span><span class="p">,</span> <span class="ss">:last_name</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span><span class="p">)</span>
    <span class="vi">@first_name</span> <span class="o">=</span> <span class="n">first_name</span>
    <span class="vi">@last_name</span> <span class="o">=</span> <span class="n">last_name</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></li><li id='classes--modules_L5'><a class='reference' href='#classes--modules_L5'><i class='icon-map-marker'></i></a><p>Avoid the usage of class (<code>@@</code>) variables due to their &quot;nasty&quot; behavior
in inheritance.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Parent</span>
  <span class="vc">@@class_var</span> <span class="o">=</span> <span class="s1">&#39;parent&#39;</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">print_class_var</span>
    <span class="nb">puts</span> <span class="vc">@@class_var</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Child</span> <span class="o">&lt;</span> <span class="no">Parent</span>
  <span class="vc">@@class_var</span> <span class="o">=</span> <span class="s1">&#39;child&#39;</span>
<span class="k">end</span>

<span class="no">Parent</span><span class="o">.</span><span class="n">print_class_var</span> <span class="c1"># =&gt; will print &quot;child&quot;</span>
</code></pre></div></li><li id='classes--modules_L6'><a class='reference' href='#classes--modules_L6'><i class='icon-map-marker'></i></a><p>Assign proper visibility levels to methods (<code>private</code>, <code>protected</code>)
in accordance with their intended usage. Don&#39;t go off leaving
everything <code>public</code> (which is the default).</p>
</li><li id='classes--modules_L7'><a class='reference' href='#classes--modules_L7'><i class='icon-map-marker'></i></a><p>Pass the method name to <code>public</code>, <code>protected</code>, and <code>private</code> methods one line below the visibility controlled method</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1">#bad</span>
<span class="k">class</span> <span class="nc">SomeClass</span>
  <span class="k">def</span> <span class="nf">public_method</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">private_method</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">another_private_method</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1">#good</span>
<span class="k">class</span> <span class="nc">SomeClass</span>
  <span class="k">def</span> <span class="nf">public_method</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">private_method</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>
  <span class="kp">private</span> <span class="ss">:private_method</span>

  <span class="k">def</span> <span class="nf">another_private_method</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>
  <span class="kp">private</span> <span class="ss">:private_method</span>
<span class="k">end</span>
</code></pre></div></li><li id='classes--modules_L8'><a class='reference' href='#classes--modules_L8'><i class='icon-map-marker'></i></a><p>Avoid class &lt;&lt; self except when necessary, e.g. single accessors and aliased attributes.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">TestClass</span>
  <span class="c1"># bad</span>
  <span class="k">class</span> <span class="o">&lt;&lt;</span> <span class="nb">self</span>
    <span class="k">def</span> <span class="nf">first_method</span>
      <span class="c1"># body omitted</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">second_method_etc</span>
      <span class="c1"># body omitted</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="c1"># good</span>
  <span class="k">class</span> <span class="o">&lt;&lt;</span> <span class="nb">self</span>
    <span class="kp">attr_accessor</span> <span class="ss">:per_page</span>
    <span class="n">alias_method</span> <span class="ss">:nwo</span><span class="p">,</span> <span class="ss">:find_by_name_with_owner</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">first_method</span>
    <span class="c1"># body omitted</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">second_method_etc</span>
    <span class="c1"># body omitted</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></li></ul>
<h2 id='exceptions'><a class='reference' href='#exceptions'><i class='icon-map-marker'></i></a>Exceptions</h2>
<ul>
<li id='exceptions_L1'><a class='reference' href='#exceptions_L1'><i class='icon-map-marker'></i></a><p>Never return from an <code>ensure</code> block. If you explicitly return from a
method inside an <code>ensure</code> block, the return will take precedence over
any exception being raised, and the method will return as if no
exception had been raised at all. In effect, the exception will be
silently thrown away.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">foo</span>
  <span class="k">begin</span>
    <span class="nb">fail</span>
  <span class="k">ensure</span>
    <span class="k">return</span> <span class="s1">&#39;very bad idea&#39;</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></li><li id='exceptions_L2'><a class='reference' href='#exceptions_L2'><i class='icon-map-marker'></i></a><p>Use <em>implicit begin blocks</em> where possible.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="k">def</span> <span class="nf">foo</span>
<span class="k">begin</span>
  <span class="c1"># main logic goes here</span>
<span class="k">rescue</span>
  <span class="c1"># failure handling goes here</span>
<span class="k">end</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="k">def</span> <span class="nf">foo</span>
  <span class="c1"># main logic goes here</span>
<span class="k">rescue</span>
  <span class="c1"># failure handling goes here</span>
<span class="k">end</span>
</code></pre></div></li><li id='exceptions_L3'><a class='reference' href='#exceptions_L3'><i class='icon-map-marker'></i></a><p>Mitigate the proliferation of <code>begin</code> blocks by using
<em>contingency methods</em> (a term coined by Avdi Grimm).</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="k">begin</span>
  <span class="n">something_that_might_fail</span>
<span class="k">rescue</span> <span class="no">IOError</span>
  <span class="c1"># handle IOError</span>
<span class="k">end</span>

<span class="k">begin</span>
  <span class="n">something_else_that_might_fail</span>
<span class="k">rescue</span> <span class="no">IOError</span>
  <span class="c1"># handle IOError</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="k">def</span> <span class="nf">with_io_error_handling</span>
   <span class="k">yield</span>
<span class="k">rescue</span> <span class="no">IOError</span>
  <span class="c1"># handle IOError</span>
<span class="k">end</span>

<span class="n">with_io_error_handling</span> <span class="p">{</span> <span class="n">something_that_might_fail</span> <span class="p">}</span>

<span class="n">with_io_error_handling</span> <span class="p">{</span> <span class="n">something_else_that_might_fail</span> <span class="p">}</span>
</code></pre></div></li><li id='exceptions_L4'><a class='reference' href='#exceptions_L4'><i class='icon-map-marker'></i></a><p>Don&#39;t suppress exceptions.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="k">begin</span>
  <span class="c1"># an exception occurs here</span>
<span class="k">rescue</span> <span class="no">SomeError</span>
  <span class="c1"># the rescue clause does absolutely nothing</span>
<span class="k">end</span>

<span class="c1"># bad</span>
<span class="n">do_something</span> <span class="k">rescue</span> <span class="kp">nil</span>
</code></pre></div></li><li id='exceptions_L5'><a class='reference' href='#exceptions_L5'><i class='icon-map-marker'></i></a><p>Avoid using <code>rescue</code> in its modifier form.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad - this catches all StandardError exceptions</span>
<span class="n">do_something</span> <span class="k">rescue</span> <span class="kp">nil</span>
</code></pre></div></li><li id='exceptions_L6'><a class='reference' href='#exceptions_L6'><i class='icon-map-marker'></i></a><p>Don&#39;t use exceptions for flow of control.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="k">begin</span>
  <span class="n">n</span> <span class="o">/</span> <span class="n">d</span>
<span class="k">rescue</span> <span class="no">ZeroDivisionError</span>
  <span class="nb">puts</span> <span class="s1">&#39;Cannot divide by 0!&#39;</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">zero?</span>
  <span class="nb">puts</span> <span class="s1">&#39;Cannot divide by 0!&#39;</span>
<span class="k">else</span>
  <span class="n">n</span> <span class="o">/</span> <span class="n">d</span>
<span class="k">end</span>
</code></pre></div></li><li id='exceptions_L7'><a class='reference' href='#exceptions_L7'><i class='icon-map-marker'></i></a><p>Avoid rescuing the <code>Exception</code> class.  This will trap signals and calls to
<code>exit</code>, requiring you to <code>kill -9</code> the process.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="k">begin</span>
  <span class="c1"># calls to exit and kill signals will be caught (except kill -9)</span>
  <span class="nb">exit</span>
<span class="k">rescue</span> <span class="no">Exception</span>
  <span class="nb">puts</span> <span class="s2">&quot;you didn&#39;t really want to exit, right?&quot;</span>
  <span class="c1"># exception handling</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="k">begin</span>
  <span class="c1"># a blind rescue rescues from StandardError, not Exception as many</span>
  <span class="c1"># programmers assume.</span>
<span class="k">rescue</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="c1"># exception handling</span>
<span class="k">end</span>

<span class="c1"># also good</span>
<span class="k">begin</span>
  <span class="c1"># an exception occurs here</span>

<span class="k">rescue</span> <span class="no">StandardError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="c1"># exception handling</span>
<span class="k">end</span>
</code></pre></div></li><li id='exceptions_L8'><a class='reference' href='#exceptions_L8'><i class='icon-map-marker'></i></a><p>Favor the use of exceptions for the standard library over
introducing new exception classes.</p>
</li><li id='exceptions_L9'><a class='reference' href='#exceptions_L9'><i class='icon-map-marker'></i></a><p>Favor error classes over exception classes.</p>
</li><li id='exceptions_L10'><a class='reference' href='#exceptions_L10'><i class='icon-map-marker'></i></a><p>Favor inheriting from <code>StandardError</code> over <code>Exception</code> when defining new errors/exceptions.</p>
</li><li id='exceptions_L11'><a class='reference' href='#exceptions_L11'><i class='icon-map-marker'></i></a><p>Basic errors should be defined on a single line using <code>Class.new</code>.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1">#bad</span>
<span class="k">class</span> <span class="nc">AwesomeError</span> <span class="o">&lt;</span> <span class="no">StandardError</span><span class="p">;</span> <span class="k">end</span>

<span class="c1">#good</span>
<span class="no">AwesomeError</span> <span class="o">=</span> <span class="no">Class</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="no">StandardError</span><span class="p">)</span>
</code></pre></div></li></ul>
<h2 id='collections'><a class='reference' href='#collections'><i class='icon-map-marker'></i></a>Collections</h2>
<ul>
<li id='collections_L1'><a class='reference' href='#collections_L1'><i class='icon-map-marker'></i></a><p>Prefer literal array and hash creation notation (unless you need to
pass parameters to their constructors, that is).</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="n">arr</span> <span class="o">=</span> <span class="nb">Array</span><span class="o">.</span><span class="n">new</span>
<span class="nb">hash</span> <span class="o">=</span> <span class="no">Hash</span><span class="o">.</span><span class="n">new</span>

<span class="c1"># good</span>
<span class="n">arr</span> <span class="o">=</span> <span class="o">[]</span>
<span class="nb">hash</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div></li><li id='collections_L2'><a class='reference' href='#collections_L2'><i class='icon-map-marker'></i></a><p>Prefer <code>%w</code> to the literal array syntax when you need an array of
words(non-empty strings without spaces and special characters in them).
Apply this rule only to arrays with two or more elements.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="no">STATES</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;draft&#39;</span><span class="p">,</span> <span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="s1">&#39;closed&#39;</span><span class="o">]</span>

<span class="c1"># good</span>
<span class="no">STATES</span> <span class="o">=</span> <span class="sx">%w(draft open closed)</span>
</code></pre></div></li><li id='collections_L3'><a class='reference' href='#collections_L3'><i class='icon-map-marker'></i></a><p>Avoid the creation of huge gaps in arrays.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="n">arr</span> <span class="o">=</span> <span class="o">[]</span>
<span class="n">arr</span><span class="o">[</span><span class="mi">100</span><span class="o">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># now you have an array with lots of nils</span>
</code></pre></div></li><li id='collections_L4'><a class='reference' href='#collections_L4'><i class='icon-map-marker'></i></a><p>When accessing the first or last element from an array, prefer <code>first</code> or <code>last</code> over <code>[0]</code> or <code>[-1]</code>.</p>
</li><li id='collections_L5'><a class='reference' href='#collections_L5'><i class='icon-map-marker'></i></a><p>Prefer symbols instead of strings as hash keys.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="nb">hash</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;one&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span> <span class="p">}</span>

<span class="c1"># good</span>
<span class="nb">hash</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">one</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="ss">two</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="ss">three</span><span class="p">:</span> <span class="mi">3</span> <span class="p">}</span>
</code></pre></div></li><li id='collections_L6'><a class='reference' href='#collections_L6'><i class='icon-map-marker'></i></a><p>Avoid the use of mutable objects as hash keys.</p>
</li><li id='collections_L7'><a class='reference' href='#collections_L7'><i class='icon-map-marker'></i></a><p>Use the hash literal syntax when your hash keys are symbols.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="nb">hash</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">:one</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="ss">:two</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="ss">:three</span> <span class="o">=&gt;</span> <span class="mi">3</span> <span class="p">}</span>

<span class="c1"># good</span>
<span class="nb">hash</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">one</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="ss">two</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="ss">three</span><span class="p">:</span> <span class="mi">3</span> <span class="p">}</span>
</code></pre></div></li><li id='collections_L8'><a class='reference' href='#collections_L8'><i class='icon-map-marker'></i></a><p>Use <code>fetch</code> when dealing with hash keys that should be present.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="n">heroes</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">batman</span><span class="p">:</span> <span class="s1">&#39;Bruce Wayne&#39;</span><span class="p">,</span> <span class="ss">superman</span><span class="p">:</span> <span class="s1">&#39;Clark Kent&#39;</span> <span class="p">}</span>
<span class="c1"># bad - if we make a mistake we might not spot it right away</span>
<span class="n">heroes</span><span class="o">[</span><span class="ss">:batman</span><span class="o">]</span> <span class="c1"># =&gt; &quot;Bruce Wayne&quot;</span>
<span class="n">heroes</span><span class="o">[</span><span class="ss">:supermann</span><span class="o">]</span> <span class="c1"># =&gt; nil</span>

<span class="c1"># good - fetch raises a KeyError making the problem obvious</span>
<span class="n">heroes</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="ss">:supermann</span><span class="p">)</span>
</code></pre></div></li><li id='collections_L9'><a class='reference' href='#collections_L9'><i class='icon-map-marker'></i></a><p>Use <code>fetch</code> with second argument to use a default value</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="n">batman</span> <span class="o">=</span> <span class="p">{</span> <span class="nb">name</span><span class="p">:</span> <span class="s1">&#39;Bruce Wayne&#39;</span><span class="p">,</span> <span class="n">is_evil</span><span class="p">:</span> <span class="kp">false</span> <span class="p">}</span>

<span class="c1"># bad - if we just use || operator with falsy value we won&#39;t get the expected result</span>
<span class="n">batman</span><span class="o">[</span><span class="ss">:is_evil</span><span class="o">]</span> <span class="o">||</span> <span class="kp">true</span> <span class="c1"># =&gt; true</span>

<span class="c1"># good - fetch work correctly with falsy values</span>
<span class="n">batman</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="ss">:is_evil</span><span class="p">,</span> <span class="kp">true</span><span class="p">)</span> <span class="c1"># =&gt; false</span>
</code></pre></div></li><li id='collections_L10'><a class='reference' href='#collections_L10'><i class='icon-map-marker'></i></a><p>Rely on the fact that as of Ruby 1.9 hashes are ordered.</p>
</li></ul>
<h2 id='strings'><a class='reference' href='#strings'><i class='icon-map-marker'></i></a>Strings</h2>
<ul>
<li id='strings_L1'><a class='reference' href='#strings_L1'><i class='icon-map-marker'></i></a><p>Prefer string interpolation instead of string concatenation:</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="n">email_with_name</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39; &lt;&#39;</span> <span class="o">+</span> <span class="n">user</span><span class="o">.</span><span class="n">email</span> <span class="o">+</span> <span class="s1">&#39;&gt;&#39;</span>

<span class="c1"># good</span>
<span class="n">email_with_name</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> &lt;</span><span class="si">#{</span><span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="si">}</span><span class="s2">&gt;&quot;</span>
</code></pre></div></li><li id='strings_L2'><a class='reference' href='#strings_L2'><i class='icon-map-marker'></i></a><p>Prefer double-quoted strings. Interpolation and escaped characters will always work without a delimiter change, and &#39; is a lot more common than &quot; in string literals.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="nb">name</span> <span class="o">=</span> <span class="s1">&#39;Bozhidar&#39;</span>

<span class="c1"># good</span>
<span class="nb">name</span> <span class="o">=</span> <span class="s2">&quot;Bozhidar&quot;</span>
</code></pre></div></li><li id='strings_L3'><a class='reference' href='#strings_L3'><i class='icon-map-marker'></i></a><p>Don&#39;t leave out <code>{}</code> around instance and global variables being
interpolated into a string.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Person</span>
  <span class="kp">attr_reader</span> <span class="ss">:first_name</span><span class="p">,</span> <span class="ss">:last_name</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span><span class="p">)</span>
    <span class="vi">@first_name</span> <span class="o">=</span> <span class="n">first_name</span>
    <span class="vi">@last_name</span> <span class="o">=</span> <span class="n">last_name</span>
  <span class="k">end</span>

  <span class="c1"># bad - valid, but awkward</span>
  <span class="k">def</span> <span class="nf">to_s</span>
    <span class="s2">&quot;</span><span class="si">#@first_name</span><span class="s2"> </span><span class="si">#@last_name</span><span class="s2">&quot;</span>
  <span class="k">end</span>

  <span class="c1"># good</span>
  <span class="k">def</span> <span class="nf">to_s</span>
    <span class="s2">&quot;</span><span class="si">#{</span><span class="vi">@first_name</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="vi">@last_name</span><span class="si">}</span><span class="s2">&quot;</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="vg">$global</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c1"># bad</span>
<span class="nb">puts</span> <span class="s2">&quot;$global = </span><span class="si">#$global</span><span class="s2">&quot;</span>

<span class="c1"># good</span>
<span class="nb">puts</span> <span class="s2">&quot;$global = </span><span class="si">#{</span><span class="vg">$global</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></li></ul>
<h2 id='regular-expressions'><a class='reference' href='#regular-expressions'><i class='icon-map-marker'></i></a>Regular Expressions</h2>
<ul>
<li id='regular-expressions_L1'><a class='reference' href='#regular-expressions_L1'><i class='icon-map-marker'></i></a><p>Don&#39;t use regular expressions if you just need plain text search in string:
<code>string[&#39;text&#39;]</code></p>
</li><li id='regular-expressions_L2'><a class='reference' href='#regular-expressions_L2'><i class='icon-map-marker'></i></a><p>Use non-capturing groups when you don&#39;t use captured result of parentheses.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="sr">/(first|second)/</span>   <span class="c1"># bad</span>
<span class="sr">/(?:first|second)/</span> <span class="c1"># good</span>
</code></pre></div></li><li id='regular-expressions_L3'><a class='reference' href='#regular-expressions_L3'><i class='icon-map-marker'></i></a><p>Avoid using $1-9 as it can be hard to track what they contain. Named groups
can be used instead.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="sr">/(regexp)/</span> <span class="o">=~</span> <span class="n">string</span>
<span class="o">.</span><span class="n">.</span><span class="o">.</span>
<span class="n">process</span> <span class="vg">$1</span>

<span class="c1"># good</span>
<span class="sr">/(?&lt;meaningful_var&gt;regexp)/</span> <span class="o">=~</span> <span class="n">string</span>
<span class="o">.</span><span class="n">.</span><span class="o">.</span>
<span class="n">process</span> <span class="n">meaningful_var</span>
</code></pre></div></li></ul>
<h2 id='percent-literals'><a class='reference' href='#percent-literals'><i class='icon-map-marker'></i></a>Percent Literals</h2>
<ul>
<li id='percent-literals_L1'><a class='reference' href='#percent-literals_L1'><i class='icon-map-marker'></i></a><p>Use <code>%()</code>(it&#39;s a shorthand for <code>%Q</code>) for single-line strings which require both interpolation
and embedded double-quotes. For multi-line strings, prefer heredocs.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad (no interpolation needed)</span>
<span class="sx">%(&lt;div class=&quot;text&quot;&gt;Some text&lt;/div&gt;)</span>
<span class="c1"># should be &#39;&lt;div class=&quot;text&quot;&gt;Some text&lt;/div&gt;&#39;</span>

<span class="c1"># bad (no double-quotes)</span>
<span class="sx">%(This is </span><span class="si">#{</span><span class="n">quality</span><span class="si">}</span><span class="sx"> style)</span>
<span class="c1"># should be &quot;This is #{quality} style&quot;</span>

<span class="c1"># bad (multiple lines)</span>
<span class="sx">%(&lt;div&gt;</span><span class="se">\n</span><span class="sx">&lt;span class=&quot;big&quot;&gt;</span><span class="si">#{</span><span class="n">exclamation</span><span class="si">}</span><span class="sx">&lt;/span&gt;</span><span class="se">\n</span><span class="sx">&lt;/div&gt;)</span>
<span class="c1"># should be a heredoc.</span>

<span class="c1"># good (requires interpolation, has quotes, single line)</span>
<span class="sx">%(&lt;tr&gt;&lt;td class=&quot;name&quot;&gt;</span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="sx">&lt;/td&gt;)</span>
</code></pre></div></li></ul>
<h2 id='misc'><a class='reference' href='#misc'><i class='icon-map-marker'></i></a>Misc</h2>
<ul>
<li id='misc_L1'><a class='reference' href='#misc_L1'><i class='icon-map-marker'></i></a>Avoid methods longer than 10 LOC (lines of code). Ideally, most methods will be shorter than
5 LOC. Empty lines do not contribute to the relevant LOC.
</li><li id='misc_L2'><a class='reference' href='#misc_L2'><i class='icon-map-marker'></i></a>Avoid parameter lists longer than three or four parameters.
</li><li id='misc_L3'><a class='reference' href='#misc_L3'><i class='icon-map-marker'></i></a>If you really need &quot;global&quot; methods, add them to Kernel
and make them private.
</li><li id='misc_L4'><a class='reference' href='#misc_L4'><i class='icon-map-marker'></i></a><p>Use module instance variables instead of global variables.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="vg">$foo_bar</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1">#good</span>
<span class="k">module</span> <span class="nn">Foo</span>
  <span class="k">class</span> <span class="o">&lt;&lt;</span> <span class="nb">self</span>
    <span class="kp">attr_accessor</span> <span class="ss">:bar</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">Foo</span><span class="o">.</span><span class="n">bar</span> <span class="o">=</span> <span class="mi">1</span>
</code></pre></div></li><li id='misc_L5'><a class='reference' href='#misc_L5'><i class='icon-map-marker'></i></a><p>Avoid <code>alias</code> when <code>alias_method</code> will do.</p>
</li><li id='misc_L6'><a class='reference' href='#misc_L6'><i class='icon-map-marker'></i></a><p>Use <code>OptionParser</code> for parsing complex command line options and
<code>ruby -s</code> for trivial command line options.</p>
</li><li id='misc_L7'><a class='reference' href='#misc_L7'><i class='icon-map-marker'></i></a><p>Code in a functional way, avoiding mutation when that makes sense.</p>
</li><li id='misc_L8'><a class='reference' href='#misc_L8'><i class='icon-map-marker'></i></a><p>Do not mutate arguments unless that is the purpose of the method.</p>
</li><li id='misc_L9'><a class='reference' href='#misc_L9'><i class='icon-map-marker'></i></a><p>Avoid more than three levels of block nesting.</p>
</li><li id='misc_L10'><a class='reference' href='#misc_L10'><i class='icon-map-marker'></i></a><p>Be consistent. In an ideal world, be consistent with these guidelines.</p>
</li><li id='misc_L11'><a class='reference' href='#misc_L11'><i class='icon-map-marker'></i></a><p>Use common sense.</p>
</li></ul>
<h2 id='never-ever'><a class='reference' href='#never-ever'><i class='icon-map-marker'></i></a>Never Ever</h2>
<ul>
<li id='never-ever_L1'><a class='reference' href='#never-ever_L1'><i class='icon-map-marker'></i></a><p>Never use <code>if x: ...</code> - as of Ruby 1.9 it has been removed. Use the ternary operator instead.</p>
</li><li id='never-ever_L2'><a class='reference' href='#never-ever_L2'><i class='icon-map-marker'></i></a><p>Never use <code>if x; ...</code>. Use the ternary operator instead.</p>
</li><li id='never-ever_L3'><a class='reference' href='#never-ever_L3'><i class='icon-map-marker'></i></a><p>Use <code>when x then ...</code> for one-line cases. The alternative syntax
<code>when x: ...</code> has been removed as of Ruby 1.9.</p>
</li><li id='never-ever_L4'><a class='reference' href='#never-ever_L4'><i class='icon-map-marker'></i></a><p>Never use <code>when x; ...</code>. See the previous rule.</p>
</li><li id='never-ever_L5'><a class='reference' href='#never-ever_L5'><i class='icon-map-marker'></i></a><p>Don&#39;t use <code>;</code> to separate statements and expressions. As a
corollary - use one expression per line. In general, don&#39;t use semicolons.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="nb">puts</span> <span class="s1">&#39;foobar&#39;</span><span class="p">;</span> <span class="c1"># superfluous semicolon</span>

<span class="nb">puts</span> <span class="s1">&#39;foo&#39;</span><span class="p">;</span> <span class="nb">puts</span> <span class="s1">&#39;bar&#39;</span> <span class="c1"># two expression on the same line</span>

<span class="c1"># good</span>
<span class="nb">puts</span> <span class="s1">&#39;foobar&#39;</span>

<span class="nb">puts</span> <span class="s1">&#39;foo&#39;</span>
<span class="nb">puts</span> <span class="s1">&#39;bar&#39;</span>

<span class="nb">puts</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span> <span class="c1"># this applies to puts in particular</span>
</code></pre></div></li><li id='never-ever_L6'><a class='reference' href='#never-ever_L6'><i class='icon-map-marker'></i></a><p>Never use <code>for</code></p>
</li><li id='never-ever_L7'><a class='reference' href='#never-ever_L7'><i class='icon-map-marker'></i></a><p>Avoid using Perl-style special variables (like <code>$0-9</code>, <code>$</code>, etc. )</p>
</li><li id='never-ever_L8'><a class='reference' href='#never-ever_L8'><i class='icon-map-marker'></i></a><p>Never put a space between a method name and the opening parenthesis.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="n">f</span> <span class="p">(</span><span class="mi">3</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>

<span class="c1"># good</span>
<span class="n">f</span><span class="p">(</span><span class="mi">3</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
</code></pre></div></li><li id='never-ever_L9'><a class='reference' href='#never-ever_L9'><i class='icon-map-marker'></i></a><p>Use <code>sprintf</code> instead of <code>String#%</code> method.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="s1">&#39;%d %d&#39;</span> <span class="o">%</span> <span class="o">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="o">]</span>
<span class="c1"># =&gt; &#39;20 10&#39;</span>

<span class="c1"># good</span>
<span class="nb">sprintf</span><span class="p">(</span><span class="s1">&#39;%d %d&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="c1"># =&gt; &#39;20 10&#39;</span>
</code></pre></div></li><li id='never-ever_L10'><a class='reference' href='#never-ever_L10'><i class='icon-map-marker'></i></a><p>Use <code>Array#join</code> instead of <code>Array#*</code> with
a string argument.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># bad</span>
<span class="sx">%w(one two three)</span> <span class="o">*</span> <span class="s1">&#39;, &#39;</span>
<span class="c1"># =&gt; &#39;one, two, three&#39;</span>

<span class="c1"># good</span>
<span class="sx">%w(one two three)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
<span class="c1"># =&gt; &#39;one, two, three&#39;</span>
</code></pre></div></li></ul>

  </div>
</div>


      </div>
      <hr>
      <footer>
      </footer>

    </div>

    
  </body>
</html>

